(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86141,e=>{"use strict";var t=e.i(43476),s=e.i(22016),r=e.i(71689),a=e.i(30592),l=e.i(75254);let i=(0,l.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),n=(0,l.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),o=(0,l.default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]),d=(0,l.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var c=e.i(43531),x=e.i(37727),m=e.i(71645);let u=(0,l.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),g=(0,l.default)("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]);function h({isOpen:e,onClose:s,onSubmit:r,itemName:a,initialText:l="",initialFileName:i=null}){let[n,o]=(0,m.useState)(""),[d,c]=(0,m.useState)(null),[h,p]=(0,m.useState)(!1),b=(0,m.useRef)(null),[f,y]=(0,m.useState)(!1);(0,m.useEffect)(()=>(e?(document.body.style.overflow="hidden",setTimeout(()=>y(!0),10),l&&o(l)):(document.body.style.overflow="unset",o(""),c(null),y(!1)),()=>{document.body.style.overflow="unset"}),[e,l]),(0,m.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&s()};if(e)return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,s]);let v=async e=>{if(e.preventDefault(),n.trim()){p(!0);try{await r(n.trim(),d),o(""),c(null),b.current&&(b.current.value=""),s()}catch(e){console.error("Error submitting issue:",e)}finally{p(!1)}}};return e?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:`fixed inset-0 z-[10000] flex items-center justify-center transition-opacity duration-200 cursor-pointer backdrop-blur-md ${f?"bg-black/20":"bg-black/0"}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,width:"100vw",height:"100vh",margin:0,padding:0},onClick:s,children:(0,t.jsxs)("div",{className:`bg-white rounded-lg max-w-2xl w-full overflow-hidden flex flex-col shadow-2xl transition-all duration-200 cursor-default m-4 ${f?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"bg-red-50 border-b border-red-200 px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-red-900",children:"Flag Issue"}),(0,t.jsx)("p",{className:"text-red-700 text-sm mt-1",children:a})]}),(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-red-100 rounded-full transition-colors cursor-pointer",children:(0,t.jsx)(x.X,{className:"w-6 h-6 text-red-700"})})]})}),(0,t.jsxs)("form",{onSubmit:v,className:"flex flex-col flex-1",children:[(0,t.jsxs)("div",{className:"flex-1 p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"issue-text",className:"block text-sm font-medium text-gray-700 mb-2",children:["Describe the issue ",(0,t.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,t.jsx)("textarea",{id:"issue-text",value:n,onChange:e=>o(e.target.value),placeholder:"Please describe the issue you've encountered...",required:!0,rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none resize-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"issue-file",className:"block text-sm font-medium text-gray-700 mb-2",children:["Attach file (optional)",i&&!d&&(0,t.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(Previously: ",i,")"]})]}),d?(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,t.jsx)(g,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:d.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[(d.size/1024).toFixed(2)," KB"]})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{c(null),b.current&&(b.current.value="")},className:"p-1 hover:bg-gray-200 rounded transition-colors cursor-pointer text-gray-600",children:(0,t.jsx)(x.X,{className:"w-4 h-4"})})]}):(0,t.jsxs)("label",{htmlFor:"issue-file",className:"flex flex-col items-center justify-center w-full h-32 px-4 py-6 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-red-400 hover:bg-red-50 transition-colors",children:[(0,t.jsx)(u,{className:"w-8 h-8 text-gray-400 mb-2"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Click to upload or drag and drop"}),(0,t.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"PDF, images, or documents"}),(0,t.jsx)("input",{ref:b,id:"issue-file",type:"file",onChange:e=>{let t=e.target.files?.[0];t&&c(t)},className:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex gap-3 justify-end",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium cursor-pointer",disabled:h,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:!n.trim()||h,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 active:bg-red-800 transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:h?"Submitting...":"Submit Issue"})]})]})]})})}):null}function p({isOpen:e,onClose:s,onConfirm:r,issueText:a,itemName:l}){let[i,o]=(0,m.useState)(!1);return((0,m.useEffect)(()=>(e?(document.body.style.overflow="hidden",setTimeout(()=>o(!0),10)):(document.body.style.overflow="unset",requestAnimationFrame(()=>{o(!1)})),()=>{document.body.style.overflow="unset"}),[e]),(0,m.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&s()};if(e)return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,s]),e)?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:`fixed inset-0 z-[10000] flex items-center justify-center transition-opacity duration-200 cursor-pointer backdrop-blur-md ${i?"bg-black/20":"bg-black/0"}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,width:"100vw",height:"100vh",margin:0,padding:0},onClick:s,children:(0,t.jsxs)("div",{className:`bg-white rounded-lg max-w-md w-full overflow-hidden flex flex-col shadow-2xl transition-all duration-200 cursor-default m-4 ${i?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"bg-green-50 border-b border-green-200 px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,t.jsx)(n,{className:"w-6 h-6 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-green-900",children:"Confirm Resolution"}),(0,t.jsx)("p",{className:"text-green-700 text-sm",children:l})]})]}),(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-green-100 rounded-full transition-colors cursor-pointer",children:(0,t.jsx)(x.X,{className:"w-5 h-5 text-green-700"})})]})}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsx)("p",{className:"text-gray-700",children:"This item has a flagged issue. Are you sure the following issue has been resolved?"}),(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-red-900 mb-2",children:"Issue:"}),(0,t.jsx)("div",{className:"text-sm text-red-800 whitespace-pre-wrap break-words",children:a})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:'Clicking "Confirm & Approve" will mark this item as reviewed and remove the issue flag.'})]}),(0,t.jsxs)("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex gap-3 justify-end",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium cursor-pointer",children:"Cancel"}),(0,t.jsxs)("button",{onClick:()=>{r(),s()},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 active:bg-green-800 transition-all font-medium shadow-sm hover:shadow-md cursor-pointer flex items-center gap-2",children:[(0,t.jsx)(n,{className:"w-4 h-4"}),"Confirm & Approve"]})]})]})})}):null}function b({isOpen:e,onClose:s,onConfirm:r,issueText:a,itemName:l}){let[i,n]=(0,m.useState)(!1);return((0,m.useEffect)(()=>(e?(document.body.style.overflow="hidden",setTimeout(()=>n(!0),10)):(document.body.style.overflow="unset",requestAnimationFrame(()=>{n(!1)})),()=>{document.body.style.overflow="unset"}),[e]),(0,m.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&s()};if(e)return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,s]),e)?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:`fixed inset-0 z-[10000] flex items-center justify-center transition-opacity duration-200 cursor-pointer backdrop-blur-md ${i?"bg-black/20":"bg-black/0"}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,width:"100vw",height:"100vh",margin:0,padding:0},onClick:s,children:(0,t.jsxs)("div",{className:`bg-white rounded-lg max-w-md w-full overflow-hidden flex flex-col shadow-2xl transition-all duration-200 cursor-default m-4 ${i?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"bg-red-50 border-b border-red-200 px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-red-100 rounded-full",children:(0,t.jsx)(d,{className:"w-6 h-6 text-red-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-red-900",children:"Delete Issue"}),(0,t.jsx)("p",{className:"text-red-700 text-sm",children:l})]})]}),(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-red-100 rounded-full transition-colors cursor-pointer",children:(0,t.jsx)(x.X,{className:"w-5 h-5 text-red-700"})})]})}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsx)("p",{className:"text-gray-700",children:"Are you sure you want to delete this issue? This action cannot be undone."}),(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-red-900 mb-2",children:"Issue to be deleted:"}),(0,t.jsx)("div",{className:"text-sm text-red-800 whitespace-pre-wrap break-words",children:a})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"The card will return to pending review status after deletion."})]}),(0,t.jsxs)("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex gap-3 justify-end",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium cursor-pointer",children:"Cancel"}),(0,t.jsxs)("button",{onClick:()=>{r(),s()},className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 active:bg-red-800 transition-all font-medium shadow-sm hover:shadow-md cursor-pointer flex items-center gap-2",children:[(0,t.jsx)(d,{className:"w-4 h-4"}),"Delete Issue"]})]})]})})}):null}function f({isOpen:e,onClose:s,onSelectUnit:r,units:a,unitDesigns:l}){let[i,n]=(0,m.useState)(null),[o,d]=(0,m.useState)(!1);(0,m.useEffect)(()=>(e?(document.body.style.overflow="hidden",setTimeout(()=>d(!0),10),n(null)):(document.body.style.overflow="unset",d(!1)),()=>{document.body.style.overflow="unset"}),[e]),(0,m.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&s()};if(e)return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,s]);let u=[...a].sort((e,t)=>e.id.localeCompare(t.id));return e?(0,t.jsx)("div",{className:`fixed inset-0 z-[10000] flex items-center justify-center transition-opacity duration-200 cursor-pointer backdrop-blur-md ${o?"bg-black/20":"bg-black/0"}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,width:"100vw",height:"100vh",margin:0,padding:0},onClick:s,children:(0,t.jsxs)("div",{className:`bg-white rounded-lg max-w-3xl w-full max-h-[80vh] overflow-hidden flex flex-col shadow-2xl transition-all duration-200 cursor-default m-4 ${o?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"bg-blue-50 border-b border-blue-200 px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-blue-900",children:"Select Unit"}),(0,t.jsx)("p",{className:"text-blue-700 text-sm mt-1",children:"Choose a unit to generate the payment plan preview"})]}),(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-blue-100 rounded-full transition-colors cursor-pointer",children:(0,t.jsx)(x.X,{className:"w-5 h-5 text-blue-700"})})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,t.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Unit ID"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Design"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Price"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:u.map(e=>{let s,r=l.find(t=>t.id===e.unitDesignId);return(0,t.jsxs)("tr",{onClick:()=>{n(e.id)},className:`transition-colors cursor-pointer ${i===e.id?"bg-blue-50":"bg-white hover:bg-gray-50"}`,children:[(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)("span",{className:"text-sm font-mono text-gray-900",children:e.id})}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)("span",{className:"text-sm text-gray-700",children:r?.name||"Unknown"})}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:(s=e.price,new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(s)+" EGP")})}),(0,t.jsx)("td",{className:"px-4 py-2",children:i===e.id&&(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)("div",{className:"p-1 bg-blue-500 rounded-full",children:(0,t.jsx)(c.Check,{className:"w-4 h-4 text-white"})})})})]},e.id)})})]})})}),(0,t.jsxs)("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex gap-3 justify-end",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium cursor-pointer",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{if(i){let e=a.find(e=>e.id===i);e&&(r(e),s())}},disabled:!i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:"Generate Payment Plan"})]})]})}):null}function y({plan:e,isReviewed:s,onToggleReviewed:r,hasIssues:a,latestIssue:l,onIssueSubmit:u,onResolveIssue:g,onDeleteIssue:y,units:v,unitDesigns:w}){let[j,N]=(0,m.useState)(!1),[k,C]=(0,m.useState)(!1),[$,S]=(0,m.useState)(!1),[I,E]=(0,m.useState)(!1),[P,M]=(0,m.useState)({x:0,y:0}),[R,F]=(0,m.useState)(!1),T=(0,m.useRef)(null);return(0,m.useEffect)(()=>()=>{T.current&&clearTimeout(T.current)},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`rounded-lg shadow-sm hover:shadow-md transition-all duration-300 p-4 border-2 ${s?"bg-green-50/60 border-green-400/60":a?"bg-red-50/60 border-red-400/60":"bg-white border-transparent hover:border-blue-400/60 hover:bg-gray-50/50"}`,children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsx)("h3",{className:`text-lg font-semibold flex-1 break-words ${s?"text-gray-700 line-through":"text-gray-900"}`,children:e.name}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-2 ml-2 flex-shrink-0",children:[(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),a&&!s&&l?C(!0):r()},className:`group flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg transition-all duration-200 cursor-pointer w-full justify-center ${s?"bg-green-100 hover:bg-green-200 border border-green-300":"bg-white hover:bg-green-50 border border-gray-300 hover:border-green-300"}`,"aria-label":s?"Mark as pending":"Mark as reviewed",title:s?"Mark as pending":"Mark as reviewed",children:[(0,t.jsx)(n,{className:`w-4 h-4 transition-colors ${s?"text-green-700 fill-green-700":"text-gray-600 group-hover:text-green-600"}`}),(0,t.jsx)("span",{className:`text-xs font-medium ${s?"text-green-700":"text-gray-600 group-hover:text-green-600"}`,children:s?"Approved":"Approve"})]}),(0,t.jsxs)("div",{className:"relative z-50",children:[(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),N(!0)},onMouseEnter:e=>{if(a){T.current&&(clearTimeout(T.current),T.current=null);let t=e.currentTarget.getBoundingClientRect();M({x:t.left+t.width/2,y:t.top}),E(!0)}},onMouseLeave:()=>{T.current=setTimeout(()=>{E(!1)},200)},className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg transition-all duration-200 cursor-pointer relative group w-full justify-center ${a?"bg-red-100 hover:bg-red-200 border border-red-300":"bg-white hover:bg-red-50 border border-gray-300 hover:border-red-300"}`,"aria-label":"Flag issue",title:a?"View issue":"Flag issue",children:[(0,t.jsx)(o,{className:`w-4 h-4 transition-colors ${a?"text-red-700 fill-red-700":"text-gray-600 group-hover:text-red-600"}`}),(0,t.jsx)("span",{className:`text-xs font-medium ${a?"text-red-700":"text-gray-600 group-hover:text-red-600"}`,children:a?"View Issue":"Flag Issue"})]}),a&&l&&(0,t.jsxs)("div",{className:`fixed w-72 p-3 bg-gray-900 text-white text-sm rounded-lg shadow-2xl transition-all duration-200 z-[9999] ${I?"opacity-100 visible scale-100 pointer-events-auto":"opacity-0 invisible scale-95 pointer-events-none"}`,style:{left:`${P.x}px`,top:`${P.y-10}px`,transform:I?"translate(-50%, -100%) scale(1)":"translate(-50%, -100%) scale(0.95)"},onMouseEnter:()=>{T.current&&(clearTimeout(T.current),T.current=null),E(!0)},onMouseLeave:()=>{T.current=setTimeout(()=>{E(!1)},200)},children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsx)("div",{className:"font-semibold text-red-300",children:"Issue Reported"}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),e.preventDefault(),E(!1),S(!0)},className:"p-1 hover:bg-red-600 rounded transition-colors cursor-pointer flex-shrink-0","aria-label":"Delete issue",children:(0,t.jsx)(d,{className:"w-4 h-4 text-red-300"})})]}),(0,t.jsx)("div",{className:"whitespace-pre-wrap break-words",children:l.text}),l.fileName&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:["File: ",l.fileName]}),(0,t.jsx)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-transparent border-t-gray-900 pointer-events-none"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 mb-3 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-gray-600",children:"Down Payment:"}),(0,t.jsxs)("span",{className:`text-base font-bold ${s?"text-gray-500":"text-blue-600"}`,children:[e.downPayment,"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-gray-600",children:"Payment Period:"}),(0,t.jsx)("span",{className:`text-sm font-semibold ${s?"text-gray-500":"text-gray-900"}`,children:0===e.years?"Cash":`${e.years} Year${e.years>1?"s":""}`})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 pt-2 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.includesMaintenance?(0,t.jsx)(c.Check,{className:"w-4 h-4 text-green-600"}):(0,t.jsx)(x.X,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:`text-xs ${e.includesMaintenance?"text-green-700 font-medium":"text-gray-500"}`,children:"Maintenance"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.includesClubFees?(0,t.jsx)(c.Check,{className:"w-4 h-4 text-green-600"}):(0,t.jsx)(x.X,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{className:`text-xs ${e.includesClubFees?"text-green-700 font-medium":"text-gray-500"}`,children:"Club Fees"})]})]})]}),(0,t.jsxs)("button",{onClick:()=>{F(!0)},className:`flex items-center justify-center gap-2 w-full px-3 py-2 rounded-lg transition-all duration-200 text-sm font-medium cursor-pointer ${s?"bg-gray-200 text-gray-600 hover:bg-gray-300":"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 shadow-sm hover:shadow-md"}`,children:[(0,t.jsx)(i,{className:"w-4 h-4"}),"Preview Payment Plan"]})]})}),(0,t.jsx)(h,{isOpen:j,onClose:()=>N(!1),onSubmit:(e,t)=>{u(e,t)},itemName:e.name,initialText:l?.text||"",initialFileName:l?.fileName||null}),(0,t.jsx)(p,{isOpen:k,onClose:()=>C(!1),onConfirm:()=>{g(),r()},issueText:l?.text||"",itemName:e.name}),(0,t.jsx)(b,{isOpen:$,onClose:()=>S(!1),onConfirm:y,issueText:l?.text||"",itemName:e.name}),(0,t.jsx)(f,{isOpen:R,onClose:()=>F(!1),onSelectUnit:t=>{window.open(e.previewUrl,"_blank")},units:v,unitDesigns:w})]})}let v=(0,l.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),w=(0,l.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),j=(0,l.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),N=(0,l.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function k({isOpen:e,onClose:s,media:r,unitName:a,bedrooms:l,bua:i,initialSection:n,initialImageIndex:o}){let[d,c]=(0,m.useState)(n||"floor"),[u,g]=(0,m.useState)(void 0!==o?o:0),[h,p]=(0,m.useState)(!1),b=(0,m.useRef)(!1),f=(0,m.useRef)(n),y=(0,m.useRef)(o),v=[{id:"floor",label:"Floor Plans",images:r.floorPlans},{id:"offer",label:"Offer Gallery",images:r.offerGallery},{id:"unit",label:"Unit Gallery",images:r.unitGallery}],w=v.find(e=>e.id===d)?.images||[],k=w[u]||null,C=v.find(e=>e.id===d)?.label||"",$=()=>{if(u>0)g(u-1);else{let e=v.findIndex(e=>e.id===d);if(e>0){let t=v[e-1];c(t.id),g(t.images.length-1)}else{let e=v[v.length-1];c(e.id),g(e.images.length-1)}}},S=()=>{if(u<w.length-1)g(u+1);else{let e=v.findIndex(e=>e.id===d);e<v.length-1?c(v[e+1].id):c(v[0].id),g(0)}};return((0,m.useEffect)(()=>(e?(document.body.style.overflow="hidden",requestAnimationFrame(()=>{setTimeout(()=>p(!0),10)}),n&&requestAnimationFrame(()=>{c(n)}),requestAnimationFrame(()=>{setTimeout(()=>{void 0!==o?g(o):g(0),b.current=!0},0)}),f.current=n,y.current=o):(document.body.style.overflow="unset",requestAnimationFrame(()=>{p(!1)}),b.current=!1),()=>{document.body.style.overflow="unset"}),[e,n,o]),(0,m.useEffect)(()=>{e&&b.current&&void 0!==n&&d!==n&&g(0)},[d,e,n]),(0,m.useEffect)(()=>{let t=t=>{e&&("Escape"===t.key?s():"ArrowLeft"===t.key?$():"ArrowRight"===t.key&&S())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,u,w.length,d]),e)?(0,t.jsx)("div",{className:`fixed inset-0 z-[10000] bg-black transition-opacity duration-300 ${h?"opacity-100":"opacity-0"}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,width:"100vw",height:"100vh",margin:0,padding:0},onClick:s,children:(0,t.jsxs)("div",{className:"relative flex flex-col cursor-default",style:{width:"100%",height:"100%",minHeight:"100vh",margin:0,padding:0},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 right-0 z-20 bg-gradient-to-b from-black/90 via-black/80 to-transparent px-6 pt-4 pb-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:a}),(void 0!==l||void 0!==i)&&(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[void 0!==l&&(0,t.jsxs)("span",{className:"px-4 py-2 bg-white/15 backdrop-blur-sm rounded-lg text-sm font-semibold text-white border border-white/25 shadow-sm",children:[l," ",1===l?"Bedroom":"Bedrooms"]}),void 0!==i&&(0,t.jsxs)("span",{className:"px-4 py-2 bg-white/15 backdrop-blur-sm rounded-lg text-sm font-semibold text-white border border-white/25 shadow-sm",children:["BUA ",i," sqm"]})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:v.map(e=>(0,t.jsx)("button",{onClick:()=>{c(e.id),g(0)},className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all cursor-pointer ${d===e.id?"bg-blue-600 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:e.label},e.id))})]}),(0,t.jsx)("button",{onClick:s,className:"hover:bg-white/20 rounded-full transition-colors cursor-pointer text-white flex items-center justify-center","aria-label":"Close",style:{width:"2rem",height:"2rem",padding:"0.5rem"},children:(0,t.jsx)(x.X,{className:"w-5 h-5"})})]})}),k&&(0,t.jsxs)("div",{className:"flex-1 flex items-center justify-center relative pt-16 pb-16",children:[(0,t.jsx)("button",{onClick:$,className:"absolute left-4 z-10 p-3 bg-black/50 hover:bg-black/70 text-white rounded-full transition-all cursor-pointer backdrop-blur-sm","aria-label":"Previous image",children:(0,t.jsx)(j,{className:"w-6 h-6"})}),(0,t.jsx)("div",{className:"relative w-full h-full flex items-center justify-center px-4",children:(0,t.jsx)("img",{src:k,alt:`${C} ${u+1}`,className:"max-w-[98vw] max-h-[calc(100vh-140px)] w-auto h-auto object-contain",onError:e=>{let t=e.target;t.dataset.fallbackUsed||(t.dataset.fallbackUsed="true",t.src="https://picsum.photos/seed/999/1200/800")}})}),(0,t.jsx)("button",{onClick:S,className:"absolute right-4 z-10 p-3 bg-black/50 hover:bg-black/70 text-white rounded-full transition-all cursor-pointer backdrop-blur-sm","aria-label":"Next image",children:(0,t.jsx)(N,{className:"w-6 h-6"})})]}),w.length>1&&(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-black/90 via-black/80 to-transparent px-6 pt-6 pb-4",children:[(0,t.jsx)("div",{className:"flex gap-2 justify-center mb-3",children:w.map((e,s)=>(0,t.jsxs)("button",{onClick:()=>g(s),className:`relative w-16 h-16 rounded-lg overflow-hidden border-2 transition-all flex-shrink-0 cursor-pointer ${s===u?"border-blue-500 ring-2 ring-blue-400 scale-110":"border-white/30 hover:border-white/60"}`,children:[(0,t.jsx)("img",{src:e,alt:`Thumbnail ${s+1}`,className:"w-full h-full object-cover",onError:e=>{let t=e.target;t.dataset.fallbackUsed||(t.dataset.fallbackUsed="true",t.src="https://picsum.photos/seed/999/64/64")}}),s===u&&(0,t.jsx)("div",{className:"absolute inset-0 bg-blue-500/20"})]},s))}),w.length>0&&(0,t.jsx)("div",{className:"text-center mb-3",children:(0,t.jsxs)("div",{className:"text-white text-sm font-medium",children:[u+1," / ",w.length]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-white text-xs pb-1",children:[(0,t.jsx)("div",{className:"font-medium",children:C}),(0,t.jsx)("div",{className:"text-white/70",children:"Arrow keys to navigate • ESC to close"})]})]}),w.length<=1&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-black/80 to-transparent px-6 py-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-white text-xs",children:[(0,t.jsx)("div",{className:"font-medium",children:C}),(0,t.jsx)("div",{className:"text-white/70",children:"Arrow keys to navigate • ESC to close"})]})})]})}):null}function C({media:e,onClick:s,maxImages:r=8,showSections:a=!0,compact:l=!1,showAll:i=!1}){let[n,o]=(0,m.useState)(null),d=(0,m.useRef)(null),c=[{name:"Floor",images:e.floorPlans,color:"bg-green-500",textColor:"text-green-600"},{name:"Offer",images:e.offerGallery,color:"bg-blue-500",textColor:"text-blue-600"},{name:"Unit",images:e.unitGallery,color:"bg-purple-500",textColor:"text-purple-600"}],x=c.reduce((e,t)=>e+t.images.length,0),u=r,g=[];c.forEach(e=>{let t=Math.min(Math.min(e.images.length,Math.ceil(e.images.length/x*r)||Math.floor(u/(c.length-c.indexOf(e)))),u);for(let s=0;s<t&&u>0;s++)g.push({url:e.images[s%e.images.length],section:e.name.toLowerCase(),sectionLabel:e.name,sectionColor:e.textColor}),u--}),u>0&&c.forEach(e=>{for(let t=0;t<u&&e.images.length>0;t++)g.push({url:e.images[t%e.images.length],section:e.name.toLowerCase(),sectionLabel:e.name,sectionColor:e.textColor}),u--});let h=(e,t,s)=>{d.current&&clearTimeout(d.current);let r=e.currentTarget.getBoundingClientRect();d.current=setTimeout(()=>{o({url:t.replace("/400/400","/1200/800"),x:r.left+r.width/2,y:r.top,section:s})},1500)},p=()=>{d.current&&(clearTimeout(d.current),d.current=null),o(null)},b=l?"w-10 h-10":"aspect-square";return(0,t.jsxs)(t.Fragment,{children:[a?(0,t.jsx)("div",{className:"space-y-2",children:c.map((e,a)=>{if(0===e.images.length)return null;let n=i?e.images:e.images.slice(0,l?4:Math.max(2,Math.floor(r/c.length)));return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-gray-900",children:"Offer"===e.name?"Offer Gallery":"Unit"===e.name?"Unit Gallery":"Floor Plans"}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.images.length,")"]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5",children:n.map((r,l)=>{let n=e.name.toLowerCase();return(0,t.jsx)("div",{className:`relative ${i?"w-16 h-16":b} bg-gray-100 rounded overflow-hidden flex-shrink-0 ${s?"cursor-pointer":""}`,onMouseEnter:t=>h(t,r,e.name),onMouseLeave:p,onClick:e=>{e.stopPropagation(),s&&s(n,l)},children:(0,t.jsx)("img",{src:r,alt:`${e.name} Gallery ${l+1}`,className:"w-full h-full object-cover hover:opacity-90 transition-opacity",loading:"lazy",onError:e=>{let t=e.target;t.dataset.fallbackUsed||(t.dataset.fallbackUsed="true",t.src="https://picsum.photos/seed/999/400/400")},onLoad:()=>{}})},`${a}-${l}`)})})]},a)})}):(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1",children:g.map((e,r)=>{let a=e.section,l=c.find(t=>t.name.toLowerCase()===e.section),i=l?l.images.indexOf(e.url):0;return(0,t.jsx)("div",{className:`relative ${b} bg-gray-100 rounded overflow-hidden ${s?"cursor-pointer":""}`,onMouseEnter:t=>h(t,e.url,e.section),onMouseLeave:p,onClick:e=>{e.stopPropagation(),s&&s(a,i>=0?i:0)},children:(0,t.jsx)("img",{src:e.url,alt:`Preview ${r+1}`,className:"w-full h-full object-cover hover:opacity-90 transition-opacity",loading:"lazy",onError:e=>{let t=e.target;t.dataset.fallbackUsed||(t.dataset.fallbackUsed="true",t.src="https://picsum.photos/400/400?random=999")},onLoad:()=>{}})},`preview-${r}`)})}),n&&(0,t.jsx)("div",{className:"fixed z-[60] pointer-events-none",style:{left:`${n.x}px`,top:`${n.y-10}px`,transform:"translate(-50%, -100%)"},children:(0,t.jsxs)("div",{className:"relative w-[600px] h-[400px] rounded-lg shadow-2xl overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-3 left-3 z-10 bg-gray-900/80 text-white text-xs font-semibold px-3 py-1.5 rounded-md backdrop-blur-sm",children:"Offer"===n.section?"Offer Gallery":"Unit"===n.section?"Unit Gallery":"Floor Plans"}),(0,t.jsx)("img",{src:n.url,alt:"Full quality preview",className:"w-full h-full object-cover",onError:e=>{let t=e.target;t.dataset.fallbackUsed||(t.dataset.fallbackUsed="true",t.src="https://picsum.photos/seed/999/1200/800")}})]})})]})}function $({isOpen:e,onClose:s,unitDesignName:r,unitIds:a}){let[l,i]=(0,m.useState)(!1);return((0,m.useEffect)(()=>(e?(document.body.style.overflow="hidden",setTimeout(()=>i(!0),10)):(document.body.style.overflow="unset",i(!1)),()=>{document.body.style.overflow="unset"}),[e]),(0,m.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&s()};if(e)return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,s]),e||l)?(0,t.jsx)("div",{className:`fixed inset-0 z-50 flex items-center justify-center transition-opacity duration-200 cursor-pointer backdrop-blur-md ${l?"bg-black/20":"bg-black/0"}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,width:"100vw",height:"100vh",margin:0,padding:0},onClick:s,children:(0,t.jsxs)("div",{className:`bg-white rounded-lg max-w-md w-full overflow-hidden flex flex-col shadow-2xl transition-all duration-200 cursor-default m-4 ${l?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Units for ",r]}),(0,t.jsx)("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-200 transition-colors cursor-pointer","aria-label":"Close",children:(0,t.jsx)(x.X,{className:"w-5 h-5 text-gray-600"})})]}),(0,t.jsx)("div",{className:"p-4 max-h-96 overflow-y-auto",children:a.length>0?(0,t.jsx)("ul",{className:"space-y-1",children:a.map(e=>(0,t.jsx)("li",{className:"px-3 py-1 bg-gray-100 rounded-md text-sm font-mono text-gray-800",children:e},e))}):(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"No units assigned to this design."})}),(0,t.jsx)("div",{className:"p-4 border-t border-gray-200 flex justify-end bg-gray-50",children:(0,t.jsx)("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors cursor-pointer",children:"Close"})})]})}):null}function S({unitDesign:e,isReviewed:s,onToggleReviewed:r,hasIssues:a,latestIssue:l,onIssueSubmit:c,onResolveIssue:x,onDeleteIssue:u,units:g}){let[f,y]=(0,m.useState)(!1),[j,N]=(0,m.useState)(!1),[S,I]=(0,m.useState)(!1),[E,P]=(0,m.useState)(!1),[M,R]=(0,m.useState)(!1),[F,T]=(0,m.useState)({x:0,y:0}),[A,D]=(0,m.useState)(!1),L=(0,m.useRef)(null),[U,z]=(0,m.useState)(),[O,q]=(0,m.useState)();(0,m.useEffect)(()=>()=>{L.current&&clearTimeout(L.current)},[]);let B=(e,t)=>{z(e),q(t),y(!0)},G=g.filter(t=>t.unitDesignId===e.id),V=G.length,X=G.map(e=>e.id).sort();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:`rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 p-6 relative overflow-hidden ${s?"bg-gradient-to-br from-green-50 to-green-100/50 border-2 border-green-400/60":a?"bg-gradient-to-br from-red-50 to-red-100/50 border-2 border-red-400/60":"bg-white border border-gray-200 hover:border-blue-300 hover:shadow-lg hover:bg-gradient-to-br hover:from-blue-50/30 hover:to-white"}`,children:[!s&&!a&&(0,t.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-100/20 to-transparent rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,t.jsxs)("div",{className:"absolute top-5 right-5 flex items-center gap-2 z-10",children:[(0,t.jsxs)("div",{className:"relative z-50",children:[(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),N(!0)},onMouseEnter:e=>{if(a){L.current&&(clearTimeout(L.current),L.current=null);let t=e.currentTarget.getBoundingClientRect();T({x:t.left+t.width/2,y:t.top}),R(!0)}},onMouseLeave:()=>{L.current=setTimeout(()=>{R(!1)},200)},className:`flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all duration-200 cursor-pointer relative group ${a?"bg-red-100 hover:bg-red-200 border border-red-300 shadow-sm":"bg-white hover:bg-red-50 border border-gray-300 hover:border-red-300 shadow-sm"}`,"aria-label":"Flag issue",title:a?"View issue":"Flag issue",children:[(0,t.jsx)(o,{className:`w-4 h-4 transition-colors ${a?"text-red-700 fill-red-700":"text-gray-600 group-hover:text-red-600"}`}),(0,t.jsx)("span",{className:`text-xs font-semibold ${a?"text-red-700":"text-gray-600 group-hover:text-red-600"}`,children:a?"View Issue":"Flag Issue"})]}),a&&l&&(0,t.jsxs)("div",{className:`fixed w-72 p-3 bg-gray-900 text-white text-sm rounded-lg shadow-2xl transition-all duration-200 z-[9999] ${M?"opacity-100 visible scale-100 pointer-events-auto":"opacity-0 invisible scale-95 pointer-events-none"}`,style:{left:`${F.x}px`,top:`${F.y-10}px`,transform:M?"translate(-50%, -100%) scale(1)":"translate(-50%, -100%) scale(0.95)"},onMouseEnter:()=>{L.current&&(clearTimeout(L.current),L.current=null),R(!0)},onMouseLeave:()=>{L.current=setTimeout(()=>{R(!1)},200)},children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsx)("div",{className:"font-semibold text-red-300",children:"Issue Reported"}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),e.preventDefault(),R(!1),P(!0)},className:"p-1 hover:bg-red-600 rounded transition-colors cursor-pointer flex-shrink-0","aria-label":"Delete issue",children:(0,t.jsx)(d,{className:"w-4 h-4 text-red-300"})})]}),(0,t.jsx)("div",{className:"whitespace-pre-wrap break-words",children:l.text}),l.fileName&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:["File: ",l.fileName]}),(0,t.jsx)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-transparent border-t-gray-900 pointer-events-none"})]})]}),(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),a&&!s&&l?I(!0):r()},className:`group flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all duration-200 cursor-pointer ${s?"bg-green-100 hover:bg-green-200 border border-green-300 shadow-sm":"bg-white hover:bg-green-50 border border-gray-300 hover:border-green-300 shadow-sm"}`,"aria-label":s?"Mark as pending":"Mark as reviewed",title:s?"Mark as pending":"Mark as reviewed",children:[(0,t.jsx)(n,{className:`w-4 h-4 transition-colors ${s?"text-green-700 fill-green-700":"text-gray-600 group-hover:text-green-600"}`}),(0,t.jsx)("span",{className:`text-xs font-semibold ${s?"text-green-700":"text-gray-600 group-hover:text-green-600"}`,children:s?"Approved":"Approve"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-8 relative",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 w-64 pr-8 border-r border-gray-200/60",children:[(0,t.jsx)("h3",{className:`text-xl font-bold mb-4 tracking-tight ${s?"text-gray-400 line-through":"text-gray-900"}`,children:e.name}),e.amenities&&e.amenities.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:e.amenities.map((e,s)=>(0,t.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-blue-50 text-blue-700 border border-blue-200/60",children:e},s))}),(0,t.jsxs)("div",{className:"space-y-2.5 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Bedrooms:"}),(0,t.jsx)("span",{className:`text-sm font-bold ${s?"text-gray-400":"text-gray-900"}`,children:0===e.beds?"Studio":`${e.beds} Bed${e.beds>1?"s":""}`})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"BUA:"}),(0,t.jsxs)("span",{className:`text-sm font-bold ${s?"text-gray-400":"text-gray-900"}`,children:[e.bua," m²"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2.5 pt-3 border-t border-gray-200/60",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Units Assigned:"}),(0,t.jsx)("span",{className:`text-sm font-bold ${s?"text-gray-400":"text-blue-600"}`,children:V}),V>0&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),D(!0)},className:"p-1.5 rounded-lg hover:bg-blue-50 text-blue-600 hover:text-blue-700 transition-all duration-200 cursor-pointer -ml-1",title:"View assigned unit IDs","aria-label":"View assigned unit IDs",children:(0,t.jsx)(w,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("button",{onClick:()=>B(),className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg transition-all duration-200 text-xs font-medium cursor-pointer h-9 ${s?"bg-gray-100 text-gray-500 hover:bg-gray-200 border border-gray-200":"bg-gradient-to-r from-blue-50 to-blue-100/50 text-blue-700 hover:from-blue-100 hover:to-blue-200 border border-blue-200/60 shadow-sm hover:shadow-md"}`,children:[(0,t.jsx)(v,{className:"w-3.5 h-3.5"}),"View All Media"]}),(0,t.jsxs)("button",{onClick:()=>{window.open(e.previewUrl,"_blank")},className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg transition-all duration-200 text-xs font-medium cursor-pointer h-9 ${s?"bg-gray-200 text-gray-500 hover:bg-gray-300 border border-gray-300":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 shadow-md hover:shadow-lg"}`,children:[(0,t.jsx)(i,{className:"w-3.5 h-3.5"}),"Preview Offer"]})]})]}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)(C,{media:e.media,onClick:B,maxImages:999,showSections:!0,compact:!1,showAll:!0})})]})]}),(0,t.jsx)(k,{isOpen:f,onClose:()=>{y(!1),z(void 0),q(void 0)},media:e.media,unitName:e.name,bedrooms:e.beds,bua:e.bua,initialSection:U,initialImageIndex:O}),(0,t.jsx)(h,{isOpen:j,onClose:()=>N(!1),onSubmit:(e,t)=>{c(e,t)},itemName:e.name,initialText:l?.text||"",initialFileName:l?.fileName||null}),(0,t.jsx)(p,{isOpen:S,onClose:()=>I(!1),onConfirm:()=>{x(),r()},issueText:l?.text||"",itemName:e.name}),(0,t.jsx)(b,{isOpen:E,onClose:()=>P(!1),onConfirm:u,issueText:l?.text||"",itemName:e.name}),(0,t.jsx)($,{isOpen:A,onClose:()=>D(!1),unitDesignName:e.name,unitIds:X})]})}function I(e,t){let s=`reviewed-${e}-${t}`,[r,a]=(0,m.useState)(new Set);return(0,m.useEffect)(()=>{let e=localStorage.getItem(s);if(e)try{let t=JSON.parse(e);a(new Set(t))}catch(e){}},[s]),{isReviewed:e=>r.has(e),toggleReviewed:e=>{a(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),localStorage.setItem(s,JSON.stringify(Array.from(r))),r})},reviewedIds:r}}function E(e,t){let s=`issues-${e}-${t}`,[r,a]=(0,m.useState)(new Map);return(0,m.useEffect)(()=>{let e=localStorage.getItem(s);if(e)try{let t=JSON.parse(e);a(new Map(t))}catch(e){}},[s]),{addIssue:(e,t,r,l)=>{a(a=>{let i=new Map(a),n=i.get(e)||[],o={id:`${Date.now()}-${Math.random()}`,text:t,fileName:r,fileSize:l,timestamp:new Date().toISOString()};i.set(e,[...n,o]);let d=Array.from(i.entries());return localStorage.setItem(s,JSON.stringify(d)),i})},getIssues:e=>r.get(e)||[],getLatestIssue:e=>{let t=r.get(e);return t&&0!==t.length?t[t.length-1]:null},hasIssues:e=>(r.get(e)?.length||0)>0,removeIssues:e=>{a(t=>{let r=new Map(t);r.delete(e);let a=Array.from(r.entries());return localStorage.setItem(s,JSON.stringify(a)),r})}}}function P({releaseId:e}){let[l,i]=(0,m.useState)("unit-designs"),[n,o]=(0,m.useState)("all"),d=(0,m.useRef)(null),c=(0,m.useRef)(null),[x,u]=(0,m.useState)({width:0,left:0}),[g,h]=(0,m.useState)(void 0),[p,b]=(0,m.useState)(!0);(0,m.useEffect)(()=>{e&&1?requestAnimationFrame(()=>{h((0,a.getReleaseById)(e)),b(!1)}):b(!1)},[]);let f=I(e||"","payment-plan"),v=I(e||"","unit-design"),w=E(e||"","payment-plan"),j=E(e||"","unit-design");if((0,m.useEffect)(()=>{let e=()=>{let e="unit-designs"===l?c.current:d.current;if(e){let{offsetLeft:t,offsetWidth:s}=e;u({width:s,left:t})}};return setTimeout(e,0),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[l]),p)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading release..."})]})});if(!g)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Release Not Found"}),(0,t.jsx)("p",{className:"text-gray-600",children:"The release you're looking for doesn't exist."})]})});let N=g.paymentPlans.filter(e=>{let t=f.isReviewed(e.id),s=w.hasIssues(e.id);return"all"===n||("reviewed"===n?t:"pending"===n?!t&&!s:"flagged"!==n||s)}),k=g.unitDesigns.filter(e=>{let t=v.isReviewed(e.id),s=j.hasIssues(e.id);return"all"===n||("reviewed"===n?t:"pending"===n?!t&&!s:"flagged"!==n||s)});return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-gray-50",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"py-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900 tracking-tight mb-1.5",children:g.releaseName}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,t.jsx)("span",{className:"px-2.5 py-0.5 bg-blue-100 text-blue-700 font-semibold rounded-full uppercase tracking-wider",children:g.compoundName}),(0,t.jsxs)("span",{children:["Release Date:"," ",(0,t.jsx)("span",{className:"font-medium text-gray-700",children:new Date(g.releaseDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),(0,t.jsxs)(s.default,{href:"/",className:"flex items-center gap-1.5 px-3 py-1.5 bg-white hover:bg-gray-50 border border-gray-300 rounded-lg text-xs font-medium text-gray-700 transition-colors duration-200 cursor-pointer shadow-sm hover:shadow-md shrink-0",children:[(0,t.jsx)(r.ArrowLeft,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"All Releases"})]})]}),(0,t.jsx)("div",{className:"relative border-b-2 border-gray-200",children:(0,t.jsxs)("div",{className:"flex gap-6 relative -mb-0.5",children:[(0,t.jsx)("button",{ref:c,onClick:()=>{i("unit-designs"),o("all")},className:`px-0 py-2.5 font-semibold text-base transition-all duration-300 relative whitespace-nowrap cursor-pointer ${"unit-designs"===l?"text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:(0,t.jsxs)("span",{className:"flex items-baseline gap-1.5",children:["Unit Designs",(0,t.jsx)("span",{className:`text-xs font-normal px-1.5 py-0.5 rounded transition-all duration-300 ${"unit-designs"===l?"bg-blue-50 text-blue-600":"bg-transparent text-gray-400"}`,children:g.unitDesigns.length})]})}),(0,t.jsx)("button",{ref:d,onClick:()=>{i("payment-plans"),o("all")},className:`px-0 py-2.5 font-semibold text-base transition-all duration-300 relative whitespace-nowrap cursor-pointer ${"payment-plans"===l?"text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:(0,t.jsxs)("span",{className:"flex items-baseline gap-1.5",children:["Payment Plans",(0,t.jsx)("span",{className:`text-xs font-normal px-1.5 py-0.5 rounded transition-all duration-300 ${"payment-plans"===l?"bg-blue-50 text-blue-600":"bg-transparent text-gray-400"}`,children:g.paymentPlans.length})]})}),(0,t.jsx)("div",{className:"absolute bottom-0 h-1 bg-blue-600 transition-all duration-300 ease-out rounded-full",style:{width:`${x.width}px`,left:`${x.left}px`,transform:"translateY(30%)"}})]})})]})})}),(0,t.jsx)("main",{className:"bg-gray-50",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsx)("div",{className:"animate-[fadeIn_0.3s_ease-in-out]",children:"payment-plans"===l?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center gap-3 flex-wrap",children:[(0,t.jsxs)("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer ${"all"===n?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["All (",g.paymentPlans.length,")"]}),(0,t.jsxs)("button",{onClick:()=>o("reviewed"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer ${"reviewed"===n?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Reviewed (",g.paymentPlans.filter(e=>f.isReviewed(e.id)).length,")"]}),(0,t.jsxs)("button",{onClick:()=>o("pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer ${"pending"===n?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Pending (",g.paymentPlans.filter(e=>{let t=f.isReviewed(e.id),s=w.hasIssues(e.id);return!t&&!s}).length,")"]}),(0,t.jsxs)("button",{onClick:()=>o("flagged"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer ${"flagged"===n?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Flagged (",g.paymentPlans.filter(e=>w.hasIssues(e.id)).length,")"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>{let s=f.isReviewed(e.id),r=w.getIssues(e.id);return(0,t.jsx)(y,{plan:e,isReviewed:s,onToggleReviewed:()=>{r.length>0||f.toggleReviewed(e.id)},hasIssues:w.hasIssues(e.id),latestIssue:w.getLatestIssue(e.id),onIssueSubmit:(t,r)=>{s&&f.toggleReviewed(e.id),w.addIssue(e.id,t,r?.name||null,r?.size||null)},onResolveIssue:()=>{w.removeIssues(e.id),f.toggleReviewed(e.id)},onDeleteIssue:()=>{w.removeIssues(e.id)},units:g.units,unitDesigns:g.unitDesigns},e.id)})})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center gap-3 flex-wrap",children:[(0,t.jsxs)("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer ${"all"===n?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["All (",g.unitDesigns.length,")"]}),(0,t.jsxs)("button",{onClick:()=>o("reviewed"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer ${"reviewed"===n?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Reviewed (",g.unitDesigns.filter(e=>v.isReviewed(e.id)).length,")"]}),(0,t.jsxs)("button",{onClick:()=>o("pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer ${"pending"===n?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Pending (",g.unitDesigns.filter(e=>{let t=v.isReviewed(e.id),s=j.hasIssues(e.id);return!t&&!s}).length,")"]}),(0,t.jsxs)("button",{onClick:()=>o("flagged"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer ${"flagged"===n?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Flagged (",g.unitDesigns.filter(e=>j.hasIssues(e.id)).length,")"]})]}),(0,t.jsx)("div",{className:"space-y-6",children:k.map(e=>{let s=v.isReviewed(e.id),r=j.getIssues(e.id);return(0,t.jsx)(S,{unitDesign:e,isReviewed:s,onToggleReviewed:()=>{r.length>0||v.toggleReviewed(e.id)},hasIssues:j.hasIssues(e.id),latestIssue:j.getLatestIssue(e.id),onIssueSubmit:(t,r)=>{s&&v.toggleReviewed(e.id),j.addIssue(e.id,t,r?.name||null,r?.size||null)},onResolveIssue:()=>{j.removeIssues(e.id),v.toggleReviewed(e.id)},onDeleteIssue:()=>{j.removeIssues(e.id)},units:g.units},e.id)})})]})},l)})})]})}e.s(["default",()=>P],86141)}]);