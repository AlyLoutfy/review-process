(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,57448,e=>{"use strict";let t="releases",r="reviewed",a="issues",o="activityLog",s="users",n={db:null},i=()=>new Promise((e,i)=>{if(n.db)return void e(n.db);let c=indexedDB.open("review-process-db",1);c.onerror=()=>{i(Error("Failed to open database"))},c.onsuccess=()=>{n.db=c.result,e(n.db)},c.onupgradeneeded=e=>{let n=e.target.result;if(!n.objectStoreNames.contains(t)){let e=n.createObjectStore(t,{keyPath:"id"});e.createIndex("compoundName","compoundName",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1})}if(n.objectStoreNames.contains(r)||n.createObjectStore(r,{keyPath:"key"}),n.objectStoreNames.contains(a)||n.createObjectStore(a,{keyPath:"key"}),!n.objectStoreNames.contains(o)){let e=n.createObjectStore(o,{keyPath:"id",autoIncrement:!0});e.createIndex("releaseId","releaseId",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1})}n.objectStoreNames.contains(s)||n.createObjectStore(s,{keyPath:"key"})}}),c=async()=>(n.db||await i(),n.db),l={getAll:async()=>{let e=await c();return new Promise((r,a)=>{let o=e.transaction([t],"readonly").objectStore(t).getAll();o.onsuccess=()=>{let e=o.result;e.sort((e,t)=>{let r=new Date(e.createdAt||0).getTime();return new Date(t.createdAt||0).getTime()-r}),r(e)},o.onerror=()=>a(o.error)})},getById:async e=>{let r=await c();return new Promise((a,o)=>{let s=r.transaction([t],"readonly").objectStore(t).get(e);s.onsuccess=()=>a(s.result),s.onerror=()=>o(s.error)})},save:async e=>{let r=await c();return new Promise((a,o)=>{let s=r.transaction([t],"readwrite").objectStore(t),n={...e,createdAt:e.createdAt||new Date().toISOString()},i=s.put(n);i.onsuccess=()=>a(),i.onerror=()=>o(i.error)})},delete:async e=>{let r=await c();return new Promise((a,o)=>{let s=r.transaction([t],"readwrite").objectStore(t).delete(e);s.onsuccess=()=>a(),s.onerror=()=>o(s.error)})}},u=e=>({get:async t=>{let r=await c();return new Promise((a,o)=>{let s=r.transaction([e],"readonly").objectStore(e).get(t);s.onsuccess=()=>a(s.result?.value),s.onerror=()=>o(s.error)})},set:async(t,r)=>{let a=await c();return new Promise((o,s)=>{let n=a.transaction([e],"readwrite").objectStore(e).put({key:t,value:r});n.onsuccess=()=>o(),n.onerror=()=>s(n.error)})},delete:async t=>{let r=await c();return new Promise((a,o)=>{let s=r.transaction([e],"readwrite").objectStore(e).delete(t);s.onsuccess=()=>a(),s.onerror=()=>o(s.error)})}}),d=u(r),w=u(a),y=u(s),m={add:async e=>{let t=await c();return new Promise((r,a)=>{let s=t.transaction([o],"readwrite").objectStore(o),{id:n,...i}=e,c=s.add(i);c.onsuccess=()=>r(),c.onerror=()=>a(c.error)})},getByRelease:async e=>{let t=await c();return new Promise((r,a)=>{let s=t.transaction([o],"readonly").objectStore(o).index("releaseId").getAll(e);s.onsuccess=()=>{let e=s.result;e.sort((e,t)=>{let r=new Date(e.timestamp||0).getTime();return new Date(t.timestamp||0).getTime()-r}),r(e)},s.onerror=()=>a(s.error)})},getAll:async()=>{let e=await c();return new Promise((t,r)=>{let a=e.transaction([o],"readonly").objectStore(o).getAll();a.onsuccess=()=>{let e=a.result;e.sort((e,t)=>{let r=new Date(e.timestamp||0).getTime();return new Date(t.timestamp||0).getTime()-r}),t(e)},a.onerror=()=>r(a.error)})},deleteByRelease:async e=>{let t=await c();return new Promise(async(r,a)=>{try{let a=await m.getByRelease(e),s=t.transaction([o],"readwrite").objectStore(o),n=a.map(e=>new Promise((t,r)=>{let a=s.delete(e.id);a.onsuccess=()=>t(),a.onerror=()=>r(a.error)}));await Promise.all(n),r()}catch(e){a(e)}})}},b=async()=>{let e=await l.getAll(),t={},o={},n=await m.getAll(),i={},u=await c(),d=u.transaction([r],"readonly").objectStore(r).getAll();await new Promise(e=>{d.onsuccess=()=>{d.result.forEach(e=>{t[e.key]=e.value}),e(void 0)}});let w=u.transaction([a],"readonly").objectStore(a).getAll();await new Promise(e=>{w.onsuccess=()=>{w.result.forEach(e=>{o[e.key]=e.value}),e(void 0)}});let y=u.transaction([s],"readonly").objectStore(s).getAll();return await new Promise(e=>{y.onsuccess=()=>{y.result.forEach(e=>{i[e.key]=e.value}),e(void 0)}}),JSON.stringify({version:"1.0",exportedAt:new Date().toISOString(),releases:e,reviewed:t,issues:o,activityLog:n,users:i},null,2)},S=async e=>{let n=JSON.parse(e),i=await c(),u=e=>new Promise((t,r)=>{let a=i.transaction([e],"readwrite").objectStore(e).clear();a.onsuccess=()=>t(),a.onerror=()=>r(a.error)});if(await u(t),await u(r),await u(a),await u(o),await u(s),n.releases&&Array.isArray(n.releases))for(let e of n.releases)await l.save(e);if(n.reviewed)for(let[e,t]of Object.entries(n.reviewed))await d.set(e,t);if(n.issues)for(let[e,t]of Object.entries(n.issues))await w.set(e,t);if(n.activityLog&&Array.isArray(n.activityLog))for(let e of n.activityLog)await m.add(e);if(n.users)for(let[e,t]of Object.entries(n.users))await y.set(e,t)};e.s(["STORE_ACTIVITY_LOG",0,o,"STORE_ISSUES",0,a,"STORE_RELEASES",0,t,"STORE_REVIEWED",0,r,"STORE_USERS",0,s,"dbActivityLog",0,m,"dbIssues",0,w,"dbReleases",0,l,"dbReviewed",0,d,"dbUsers",0,y,"exportDatabase",0,b,"importDatabase",0,S,"initDB",0,i])},39870,e=>{"use strict";var t=e.i(71645),r=e.i(57448);function a(){return(0,t.useEffect)(()=>{(async()=>{try{await (0,r.initDB)()}catch(e){}})()},[]),null}e.s(["default",()=>a])}]);