<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Redirecting...</title>
    <script>
      // GitHub Pages 404 handler for Next.js client-side routing
      // When GitHub Pages can't find a file, it serves this 404.html
      // We redirect to index.html and let Next.js router handle the route
      (function () {
        console.log("[404.html] DEBUG - Starting redirect handler");
        var path = window.location.pathname;
        var search = window.location.search;
        var hash = window.location.hash;
        
        console.log("[404.html] DEBUG - Original path:", path);
        console.log("[404.html] DEBUG - Search:", search);
        console.log("[404.html] DEBUG - Hash:", hash);

        // Remove trailing slash for consistency
        if (path !== "/" && path.endsWith("/")) {
          path = path.slice(0, -1);
          console.log("[404.html] DEBUG - Removed trailing slash, new path:", path);
        }

        // IMMEDIATELY redirect - don't wait for fetch checks
        var originalPath = path + search + hash;
        console.log("[404.html] DEBUG - Original path before basePath removal:", originalPath);
        
        // Remove basePath from path if present
        var basePath = "/review-process";
        if (originalPath.startsWith(basePath)) {
          originalPath = originalPath.substring(basePath.length) || "/";
          console.log("[404.html] DEBUG - After basePath removal:", originalPath);
        }
        
        // Always store the original path (unless it's already root/index)
        if (originalPath !== "/" && originalPath !== "/index.html" && originalPath !== "") {
          console.log("[404.html] DEBUG - Storing redirect in sessionStorage:", originalPath);
          sessionStorage.setItem("nextjs-redirect", originalPath);
        } else {
          console.log("[404.html] DEBUG - Path is root/index, not storing redirect");
        }
        
        // Immediately redirect to basePath root
        var redirectUrl = basePath + "/";
        console.log("[404.html] DEBUG - Redirecting IMMEDIATELY to:", redirectUrl);
        
        // Use location.replace for immediate redirect (doesn't add to history)
        window.location.replace(redirectUrl);
      })();
    </script>
    <meta http-equiv="refresh" content="0;url=/review-process/" />
  </head>
  <body>
    <p>Redirecting...</p>
    <noscript>
      <p>JavaScript is required for this application.</p>
      <p><a href="/">Go to homepage</a></p>
    </noscript>
  </body>
</html>
